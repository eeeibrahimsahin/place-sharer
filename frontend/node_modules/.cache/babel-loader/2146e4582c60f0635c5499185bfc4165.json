{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Lenovo\\\\Desktop\\\\lastVersion\\\\place-sharer\\\\frontend\\\\src\\\\user\\\\components\\\\AddFriend.js\";\nimport React, { useState, useContext } from \"react\";\nimport { AuthContext } from \"../../shared/context/auth-context\";\nimport { useHttpClient } from \"../../shared/hooks/http-hook\";\nimport LoadingSpinner from \"../../shared/components/UIElements/LoadingSpinner\";\nimport ErrorModal from \"../../shared/components/UIElements/ErrorModal\";\n\nconst AddFriend = ({\n  receivedRequestId,\n  getRequests,\n  sentRequests\n}) => {\n  const auth = useContext(AuthContext);\n  const {\n    isLoading,\n    error,\n    sendRequest,\n    clearError\n  } = useHttpClient();\n  const [getRequest, setGetRequest] = useState(getRequests.some(request => request.user === auth.userId));\n  const [sentRequest] = useState(sentRequests.some(request => request.user === auth.userId));\n\n  const makeRequest = async () => {\n    setGetRequest(true);\n\n    try {\n      await sendRequest(`http://localhost:5000/api/friends/`, \"PATCH\", JSON.stringify({\n        userId: auth.userId,\n        friendId: receivedRequestId\n      }), {\n        \"Content-Type\": \"application/json\",\n        Authorization: \"Bearer \" + auth.token\n      });\n    } catch (err) {}\n  };\n\n  const cancelRequest = async () => {\n    setGetRequest(false);\n\n    try {\n      await sendRequest(`http://localhost:5000/api/friends/requests/reject`, \"DELETE\", JSON.stringify({\n        userId: receivedRequestId,\n        friendId: auth.userId\n      }), {\n        \"Content-Type\": \"application/json\",\n        Authorization: \"Bearer \" + auth.token\n      });\n    } catch (err) {}\n  };\n\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(ErrorModal, {\n    error: error,\n    onClear: clearError,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(React.Fragment, null, auth.userId !== receivedRequestId ? getRequest && !sentRequest ? /*#__PURE__*/React.createElement(\"button\", {\n    className: \"button--danger\",\n    onClick: cancelRequest,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 13\n    }\n  }, isLoading ? /*#__PURE__*/React.createElement(LoadingSpinner, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 28\n    }\n  }) : \"Requested\") : /*#__PURE__*/React.createElement(\"button\", {\n    className: \"button--turquoise\",\n    onClick: makeRequest,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 13\n    }\n  }, isLoading ? /*#__PURE__*/React.createElement(LoadingSpinner, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 28\n    }\n  }) : \"Add Friend\") : /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 11\n    }\n  }, \"My Profile\")));\n};\n\nexport default AddFriend;","map":{"version":3,"sources":["C:/Users/Lenovo/Desktop/lastVersion/place-sharer/frontend/src/user/components/AddFriend.js"],"names":["React","useState","useContext","AuthContext","useHttpClient","LoadingSpinner","ErrorModal","AddFriend","receivedRequestId","getRequests","sentRequests","auth","isLoading","error","sendRequest","clearError","getRequest","setGetRequest","some","request","user","userId","sentRequest","makeRequest","JSON","stringify","friendId","Authorization","token","err","cancelRequest"],"mappings":"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","sourcesContent":["import React, { useState, useContext } from \"react\";\r\n\r\nimport { AuthContext } from \"../../shared/context/auth-context\";\r\nimport { useHttpClient } from \"../../shared/hooks/http-hook\";\r\nimport LoadingSpinner from \"../../shared/components/UIElements/LoadingSpinner\";\r\nimport ErrorModal from \"../../shared/components/UIElements/ErrorModal\";\r\n\r\nconst AddFriend = ({ receivedRequestId, getRequests, sentRequests }) => {\r\n  const auth = useContext(AuthContext);\r\n  const { isLoading, error, sendRequest, clearError } = useHttpClient();\r\n\r\n  const [getRequest, setGetRequest] = useState(\r\n    getRequests.some((request) => request.user === auth.userId)\r\n  );\r\n  const [sentRequest] = useState(\r\n    sentRequests.some((request) => request.user === auth.userId)\r\n  );\r\n\r\n  const makeRequest = async () => {\r\n    setGetRequest(true);\r\n\r\n    try {\r\n      await sendRequest(\r\n        `http://localhost:5000/api/friends/`,\r\n        \"PATCH\",\r\n        JSON.stringify({\r\n          userId: auth.userId,\r\n          friendId: receivedRequestId,\r\n        }),\r\n        {\r\n          \"Content-Type\": \"application/json\",\r\n          Authorization: \"Bearer \" + auth.token,\r\n        }\r\n      );\r\n    } catch (err) {}\r\n  };\r\n  const cancelRequest = async () => {\r\n    setGetRequest(false);\r\n\r\n    try {\r\n      await sendRequest(\r\n        `http://localhost:5000/api/friends/requests/reject`,\r\n        \"DELETE\",\r\n        JSON.stringify({\r\n          userId: receivedRequestId,\r\n          friendId: auth.userId,\r\n        }),\r\n        {\r\n          \"Content-Type\": \"application/json\",\r\n          Authorization: \"Bearer \" + auth.token,\r\n        }\r\n      );\r\n    } catch (err) {}\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <ErrorModal error={error} onClear={clearError} />\r\n      <>\r\n        {auth.userId !== receivedRequestId ? (\r\n          getRequest && !sentRequest ? (\r\n            <button className=\"button--danger\" onClick={cancelRequest}>\r\n              {isLoading ? <LoadingSpinner /> : \"Requested\"}\r\n            </button>\r\n          ) : (\r\n            <button className=\"button--turquoise\" onClick={makeRequest}>\r\n              {isLoading ? <LoadingSpinner /> : \"Add Friend\"}\r\n            </button>\r\n          )\r\n        ) : (\r\n          <p>My Profile</p>\r\n        )}\r\n      </>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default AddFriend;\r\n"]},"metadata":{},"sourceType":"module"}