{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Lenovo\\\\Desktop\\\\lastVersion\\\\place-sharer\\\\frontend\\\\src\\\\bucketlist\\\\components\\\\BucketListItem.js\";\nimport React, { useState, useContext } from 'react';\nimport Card from '../../shared/components/UIElements/Card';\nimport Button from '../../shared/components/FormElements/Button';\nimport Modal from '../../shared/components/UIElements/Modal';\nimport Map from '../../shared/components/UIElements/Map';\nimport ErrorModal from '../../shared/components/UIElements/ErrorModal';\nimport LoadingSpinner from '../../shared/components/UIElements/LoadingSpinner';\nimport { AuthContext } from '../../shared/context/auth-context';\nimport { useHttpClient } from '../../shared/hooks/http-hook';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faCheckSquare } from '@fortawesome/free-regular-svg-icons';\nimport { faCheckSquare as faCheckSquareS } from '@fortawesome/free-solid-svg-icons';\nimport './BucketListItem.css';\n\nconst BucketListItem = props => {\n  const ownerId = props.ownerId;\n  const isVisited = props.isVisited;\n  const {\n    isLoading,\n    error,\n    sendRequest,\n    clearError\n  } = useHttpClient();\n  const auth = useContext(AuthContext);\n  const [showMap, setShowMap] = useState(false);\n  const [showConfirmModal, setShowConfirmModal] = useState(false);\n  const [visited, setVisited] = useState(isVisited);\n  const [showVisitedModal, setShowVisitedModal] = useState(false);\n  const [showCancelVisitedModal, setShowCancelVisitedModal] = useState(false);\n  const [showAddedModal, setShowAddedModal] = useState(false);\n  const [PlaceAdded, setPlaceAdded] = useState(false);\n\n  const openMapHandler = () => setShowMap(true);\n\n  const closeMapHandler = () => setShowMap(false);\n\n  const addToBucketListHandler = async () => {\n    setShowAddedModal(true);\n\n    try {\n      await sendRequest(`${process.env.REACT_APP_BACKEND_URL}/users/bucketList/${props.id}`, 'PATCH', null, {\n        Authorization: 'Bearer ' + auth.token\n      });\n      setPlaceAdded(true);\n    } catch (err) {}\n  };\n\n  const showDeleteWarningHandler = () => {\n    setShowConfirmModal(true);\n  };\n\n  const cancelDeleteHandler = () => {\n    setShowConfirmModal(false);\n  };\n\n  const confirmDeleteHandler = async () => {\n    setShowConfirmModal(false);\n\n    try {\n      await sendRequest(`${process.env.REACT_APP_BACKEND_URL}/users/bucketlist/${props.id}`, 'DELETE', null, {\n        Authorization: 'Bearer ' + auth.token\n      });\n      props.onDelete(props.id);\n    } catch (err) {}\n  };\n\n  const visitHandler = async () => {\n    setVisited(true);\n\n    try {\n      await sendRequest(`${process.env.REACT_APP_BACKEND_URL}/users/bucketlist/${props.id}`, 'PUT', null, {\n        Authorization: 'Bearer ' + auth.token\n      });\n      setShowVisitedModal(true);\n    } catch (err) {}\n  };\n\n  const okHandler = () => {\n    setShowVisitedModal(false);\n    setShowCancelVisitedModal(false);\n    setShowAddedModal(false);\n  };\n\n  const cancelVisitHandler = async () => {\n    setVisited(false);\n\n    try {\n      await sendRequest(`${process.env.REACT_APP_BACKEND_URL}/users/bucketlist/${props.id}`, 'PUT', null, {\n        Authorization: 'Bearer ' + auth.token\n      });\n      setShowCancelVisitedModal(true);\n    } catch (err) {}\n  };\n\n  return /*#__PURE__*/React.createElement(React.Fragment, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(ErrorModal, {\n    error: error,\n    onClear: clearError,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(Modal, {\n    show: showMap,\n    onCancel: closeMapHandler,\n    header: props.address,\n    contentClass: \"place-item__modal-content\",\n    footerClass: \"place-item__modal-actions\",\n    footer: /*#__PURE__*/React.createElement(Button, {\n      onClick: closeMapHandler,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 122,\n        columnNumber: 17\n      }\n    }, \"CLOSE\"),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"map-container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Map, {\n    center: props.coordinates,\n    zoom: 16,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 11\n    }\n  }))), /*#__PURE__*/React.createElement(Modal, {\n    show: showConfirmModal,\n    onCancel: cancelDeleteHandler,\n    header: \"Are you sure?\",\n    footerClass: \"place-item__modal-actions\",\n    footer: /*#__PURE__*/React.createElement(React.Fragment, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 134,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(Button, {\n      inverse: true,\n      onClick: cancelDeleteHandler,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 135,\n        columnNumber: 13\n      }\n    }, \"CANCEL\"), /*#__PURE__*/React.createElement(Button, {\n      danger: true,\n      onClick: confirmDeleteHandler,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 138,\n        columnNumber: 13\n      }\n    }, \"DELETE\")),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 144,\n      columnNumber: 9\n    }\n  }, \"Do you want to proceed and delete this place? Please note that it can't be undone thereafter.\")), !visited && /*#__PURE__*/React.createElement(Modal, {\n    show: showCancelVisitedModal,\n    header: props.address,\n    contentClass: \"place-item__modal-content\",\n    footerClass: \"place-item__modal-actions\",\n    footer: /*#__PURE__*/React.createElement(Button, {\n      onClick: okHandler,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 156,\n        columnNumber: 19\n      }\n    }, \"Okay\"),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 151,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 158,\n      columnNumber: 11\n    }\n  }, \"Place set to unvisited.\")), visited && /*#__PURE__*/React.createElement(Modal, {\n    show: showVisitedModal,\n    header: props.address,\n    contentClass: \"place-item__modal-content\",\n    footerClass: \"place-item__modal-actions\",\n    footer: /*#__PURE__*/React.createElement(Button, {\n      onClick: okHandler,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 168,\n        columnNumber: 19\n      }\n    }, \"Okay\"),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 163,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 170,\n      columnNumber: 11\n    }\n  }, \"Place set to visited.\")), PlaceAdded && /*#__PURE__*/React.createElement(Modal, {\n    show: showAddedModal,\n    header: props.address,\n    contentClass: \"place-item__modal-content\",\n    footerClass: \"place-item__modal-actions\",\n    footer: /*#__PURE__*/React.createElement(Button, {\n      onClick: okHandler,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 180,\n        columnNumber: 19\n      }\n    }, \"Okay\"),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 175,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 182,\n      columnNumber: 11\n    }\n  }, \"Place added to your bucket list.\")), /*#__PURE__*/React.createElement(\"li\", {\n    className: \"place-item\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 186,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Card, {\n    className: \"place-item__content\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 187,\n      columnNumber: 9\n    }\n  }, isLoading && /*#__PURE__*/React.createElement(LoadingSpinner, {\n    asOverlay: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 188,\n      columnNumber: 25\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"place-item__image\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 190,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    src: `${props.image}`,\n    alt: props.title,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 191,\n      columnNumber: 13\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"place-item__info\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 193,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 194,\n      columnNumber: 13\n    }\n  }, props.title), /*#__PURE__*/React.createElement(\"h3\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 195,\n      columnNumber: 13\n    }\n  }, props.address), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 196,\n      columnNumber: 13\n    }\n  }, props.description), /*#__PURE__*/React.createElement(\"h5\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 197,\n      columnNumber: 13\n    }\n  }, `Created By ${props.name}`)), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"place-item__actions\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 199,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    inverse: true,\n    onClick: openMapHandler,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 200,\n      columnNumber: 13\n    }\n  }, \"VIEW ON MAP\"), auth.userId === ownerId && /*#__PURE__*/React.createElement(Button, {\n    danger: true,\n    onClick: showDeleteWarningHandler,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 205,\n      columnNumber: 15\n    }\n  }, \"DELETE\"), auth.isLoggedIn && ownerId !== auth.userId && /*#__PURE__*/React.createElement(Button, {\n    inverse: true,\n    onClick: addToBucketListHandler,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 211,\n      columnNumber: 15\n    }\n  }, \"ADD TO MY BUCKET LIST\"), !auth.isLoggedIn && /*#__PURE__*/React.createElement(Button, {\n    inverse: true,\n    onClick: addToBucketListHandler,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 217,\n      columnNumber: 15\n    }\n  }, \"ADD TO MY BUCKET LIST\"), auth.userId === ownerId && !visited && /*#__PURE__*/React.createElement(\"div\", {\n    className: \"checkBox\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 223,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"h3\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 224,\n      columnNumber: 17\n    }\n  }, \"I've been there: \"), /*#__PURE__*/React.createElement(FontAwesomeIcon, {\n    icon: faCheckSquare,\n    size: \"2x\",\n    className: \"visit\",\n    onClick: visitHandler,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 225,\n      columnNumber: 17\n    }\n  })), auth.userId === ownerId && visited && /*#__PURE__*/React.createElement(\"div\", {\n    className: \"checkBox\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 234,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"h3\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 235,\n      columnNumber: 17\n    }\n  }, \"I've been there: \"), /*#__PURE__*/React.createElement(FontAwesomeIcon, {\n    icon: faCheckSquareS,\n    size: \"2x\",\n    className: \"visited\",\n    onClick: cancelVisitHandler,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 236,\n      columnNumber: 17\n    }\n  }))))));\n};\n\nexport default BucketListItem;","map":{"version":3,"sources":["C:/Users/Lenovo/Desktop/lastVersion/place-sharer/frontend/src/bucketlist/components/BucketListItem.js"],"names":["React","useState","useContext","Card","Button","Modal","Map","ErrorModal","LoadingSpinner","AuthContext","useHttpClient","FontAwesomeIcon","faCheckSquare","faCheckSquareS","BucketListItem","props","ownerId","isVisited","isLoading","error","sendRequest","clearError","auth","showMap","setShowMap","showConfirmModal","setShowConfirmModal","visited","setVisited","showVisitedModal","setShowVisitedModal","showCancelVisitedModal","setShowCancelVisitedModal","showAddedModal","setShowAddedModal","PlaceAdded","setPlaceAdded","openMapHandler","closeMapHandler","addToBucketListHandler","process","env","REACT_APP_BACKEND_URL","id","Authorization","token","err","showDeleteWarningHandler","cancelDeleteHandler","confirmDeleteHandler","onDelete","visitHandler","okHandler","cancelVisitHandler","address","coordinates","image","title","description","name","userId","isLoggedIn"],"mappings":"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","sourcesContent":["import React, { useState, useContext } from 'react'\r\n\r\nimport Card from '../../shared/components/UIElements/Card'\r\nimport Button from '../../shared/components/FormElements/Button'\r\nimport Modal from '../../shared/components/UIElements/Modal'\r\nimport Map from '../../shared/components/UIElements/Map'\r\nimport ErrorModal from '../../shared/components/UIElements/ErrorModal'\r\nimport LoadingSpinner from '../../shared/components/UIElements/LoadingSpinner'\r\nimport { AuthContext } from '../../shared/context/auth-context'\r\nimport { useHttpClient } from '../../shared/hooks/http-hook'\r\n\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\r\nimport { faCheckSquare } from '@fortawesome/free-regular-svg-icons'\r\nimport { faCheckSquare as faCheckSquareS } from '@fortawesome/free-solid-svg-icons'\r\n\r\nimport './BucketListItem.css'\r\n\r\nconst BucketListItem = (props) => {\r\n  const ownerId = props.ownerId\r\n  const isVisited = props.isVisited\r\n\r\n  const { isLoading, error, sendRequest, clearError } = useHttpClient()\r\n  const auth = useContext(AuthContext)\r\n\r\n  const [showMap, setShowMap] = useState(false)\r\n  const [showConfirmModal, setShowConfirmModal] = useState(false)\r\n\r\n  const [visited, setVisited] = useState(isVisited)\r\n  const [showVisitedModal, setShowVisitedModal] = useState(false)\r\n  const [showCancelVisitedModal, setShowCancelVisitedModal] = useState(false)\r\n\r\n  const [showAddedModal, setShowAddedModal] = useState(false)\r\n  const [PlaceAdded, setPlaceAdded] = useState(false)\r\n\r\n  const openMapHandler = () => setShowMap(true)\r\n\r\n  const closeMapHandler = () => setShowMap(false)\r\n\r\n  const addToBucketListHandler = async () => {\r\n    setShowAddedModal(true)\r\n    try {\r\n      await sendRequest(\r\n        `${process.env.REACT_APP_BACKEND_URL}/users/bucketList/${props.id}`,\r\n        'PATCH',\r\n        null,\r\n        {\r\n          Authorization: 'Bearer ' + auth.token,\r\n        }\r\n      )\r\n      setPlaceAdded(true)\r\n    } catch (err) {}\r\n  }\r\n\r\n  const showDeleteWarningHandler = () => {\r\n    setShowConfirmModal(true)\r\n  }\r\n\r\n  const cancelDeleteHandler = () => {\r\n    setShowConfirmModal(false)\r\n  }\r\n\r\n  const confirmDeleteHandler = async () => {\r\n    setShowConfirmModal(false)\r\n    try {\r\n      await sendRequest(\r\n        `${process.env.REACT_APP_BACKEND_URL}/users/bucketlist/${props.id}`,\r\n        'DELETE',\r\n        null,\r\n        {\r\n          Authorization: 'Bearer ' + auth.token,\r\n        }\r\n      )\r\n      props.onDelete(props.id)\r\n    } catch (err) {}\r\n  }\r\n\r\n  const visitHandler = async () => {\r\n    setVisited(true)\r\n    try {\r\n      await sendRequest(\r\n        `${process.env.REACT_APP_BACKEND_URL}/users/bucketlist/${props.id}`,\r\n        'PUT',\r\n        null,\r\n        {\r\n          Authorization: 'Bearer ' + auth.token,\r\n        }\r\n      )\r\n      setShowVisitedModal(true)\r\n    } catch (err) {}\r\n  }\r\n\r\n  const okHandler = () => {\r\n    setShowVisitedModal(false)\r\n    setShowCancelVisitedModal(false)\r\n    setShowAddedModal(false)\r\n  }\r\n\r\n  const cancelVisitHandler = async () => {\r\n    setVisited(false)\r\n    try {\r\n      await sendRequest(\r\n        `${process.env.REACT_APP_BACKEND_URL}/users/bucketlist/${props.id}`,\r\n        'PUT',\r\n        null,\r\n        {\r\n          Authorization: 'Bearer ' + auth.token,\r\n        }\r\n      )\r\n      setShowCancelVisitedModal(true)\r\n    } catch (err) {}\r\n  }\r\n\r\n  return (\r\n    <React.Fragment>\r\n      <ErrorModal error={error} onClear={clearError} />\r\n      <Modal\r\n        show={showMap}\r\n        onCancel={closeMapHandler}\r\n        header={props.address}\r\n        contentClass=\"place-item__modal-content\"\r\n        footerClass=\"place-item__modal-actions\"\r\n        footer={<Button onClick={closeMapHandler}>CLOSE</Button>}\r\n      >\r\n        <div className=\"map-container\">\r\n          <Map center={props.coordinates} zoom={16} />\r\n        </div>\r\n      </Modal>\r\n      <Modal\r\n        show={showConfirmModal}\r\n        onCancel={cancelDeleteHandler}\r\n        header=\"Are you sure?\"\r\n        footerClass=\"place-item__modal-actions\"\r\n        footer={\r\n          <React.Fragment>\r\n            <Button inverse onClick={cancelDeleteHandler}>\r\n              CANCEL\r\n            </Button>\r\n            <Button danger onClick={confirmDeleteHandler}>\r\n              DELETE\r\n            </Button>\r\n          </React.Fragment>\r\n        }\r\n      >\r\n        <p>\r\n          Do you want to proceed and delete this place? Please note that it\r\n          can't be undone thereafter.\r\n        </p>\r\n      </Modal>\r\n\r\n      {!visited && (\r\n        <Modal\r\n          show={showCancelVisitedModal}\r\n          header={props.address}\r\n          contentClass=\"place-item__modal-content\"\r\n          footerClass=\"place-item__modal-actions\"\r\n          footer={<Button onClick={okHandler}>Okay</Button>}\r\n        >\r\n          <p>Place set to unvisited.</p>\r\n        </Modal>\r\n      )}\r\n\r\n      {visited && (\r\n        <Modal\r\n          show={showVisitedModal}\r\n          header={props.address}\r\n          contentClass=\"place-item__modal-content\"\r\n          footerClass=\"place-item__modal-actions\"\r\n          footer={<Button onClick={okHandler}>Okay</Button>}\r\n        >\r\n          <p>Place set to visited.</p>\r\n        </Modal>\r\n      )}\r\n\r\n      {PlaceAdded && (\r\n        <Modal\r\n          show={showAddedModal}\r\n          header={props.address}\r\n          contentClass=\"place-item__modal-content\"\r\n          footerClass=\"place-item__modal-actions\"\r\n          footer={<Button onClick={okHandler}>Okay</Button>}\r\n        >\r\n          <p>Place added to your bucket list.</p>\r\n        </Modal>\r\n      )}\r\n\r\n      <li className=\"place-item\">\r\n        <Card className=\"place-item__content\">\r\n          {isLoading && <LoadingSpinner asOverlay />}\r\n\r\n          <div className=\"place-item__image\">\r\n            <img src={`${props.image}`} alt={props.title} />\r\n          </div>\r\n          <div className=\"place-item__info\">\r\n            <h2>{props.title}</h2>\r\n            <h3>{props.address}</h3>\r\n            <p>{props.description}</p>\r\n            <h5>{`Created By ${props.name}`}</h5>\r\n          </div>\r\n          <div className=\"place-item__actions\">\r\n            <Button inverse onClick={openMapHandler}>\r\n              VIEW ON MAP\r\n            </Button>\r\n\r\n            {auth.userId === ownerId && (\r\n              <Button danger onClick={showDeleteWarningHandler}>\r\n                DELETE\r\n              </Button>\r\n            )}\r\n\r\n            {auth.isLoggedIn && ownerId !== auth.userId && (\r\n              <Button inverse onClick={addToBucketListHandler}>\r\n                ADD TO MY BUCKET LIST\r\n              </Button>\r\n            )}\r\n\r\n            {!auth.isLoggedIn && (\r\n              <Button inverse onClick={addToBucketListHandler}>\r\n                ADD TO MY BUCKET LIST\r\n              </Button>\r\n            )}\r\n\r\n            {auth.userId === ownerId && !visited && (\r\n              <div className=\"checkBox\">\r\n                <h3>I've been there: </h3>\r\n                <FontAwesomeIcon\r\n                  icon={faCheckSquare}\r\n                  size=\"2x\"\r\n                  className=\"visit\"\r\n                  onClick={visitHandler}\r\n                />\r\n              </div>\r\n            )}\r\n            {auth.userId === ownerId && visited && (\r\n              <div className=\"checkBox\">\r\n                <h3>I've been there: </h3>\r\n                <FontAwesomeIcon\r\n                  icon={faCheckSquareS}\r\n                  size=\"2x\"\r\n                  className=\"visited\"\r\n                  onClick={cancelVisitHandler}\r\n                />\r\n              </div>\r\n            )}\r\n          </div>\r\n        </Card>\r\n      </li>\r\n    </React.Fragment>\r\n  )\r\n}\r\n\r\nexport default BucketListItem\r\n"]},"metadata":{},"sourceType":"module"}